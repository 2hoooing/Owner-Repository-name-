name: Melon Ticket Checker

on:
  schedule:
    - cron: '*/10 * * * *' # 10ë¶„ë§ˆë‹¤ ì‹¤í–‰
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - name: "[5/23] ë‹¤ì´ì•„ëª¬ë“œì„"
            schedule-id: 100001
            seat-id: 12170
          - name: "[5/23] ìŠ¤íƒ ë”©ì„"
            schedule-id: 100001
            seat-id: 10007
          - name: "[5/23] ì¼ë°˜ì§€ì •ì„"
            schedule-id: 100001
            seat-id: 12171
          - name: "[5/24] ë‹¤ì´ì•„ëª¬ë“œì„"
            schedule-id: 100002
            seat-id: 12170
          - name: "[5/24] ìŠ¤íƒ ë”©ì„"
            schedule-id: 100002
            seat-id: 10007
          - name: "[5/24] ì¼ë°˜ì§€ì •ì„"
            schedule-id: 100002
            seat-id: 12171
          - name: "[5/25] ë‹¤ì´ì•„ëª¬ë“œì„"
            schedule-id: 100003
            seat-id: 12170
          - name: "[5/25] ìŠ¤íƒ ë”©ì„"
            schedule-id: 100003
            seat-id: 10007
          - name: "[5/25] ì¼ë°˜ì§€ì •ì„"
            schedule-id: 100003
            seat-id: 12171

    steps:
      - name: Check Melon Ticket ${{ matrix.name }}
        uses: mooyoul/melon-ticket-actions@v1.1.0
        with:
          product-id: 211159
          schedule-id: ${{ matrix.schedule-id }}
          seat-id: ${{ matrix.seat-id }}
          slack-incoming-webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          message: '${{ matrix.name }}ì— ì¢Œì„ì´ ìƒê²¼ì–´ìš”! ğŸ‰'
          notify-when-unavailable: true # ì¢Œì„ì´ ì—†ì„ ë•Œë„ ì•Œë¦¼
