name: Melon Ticket Checker

on:
  schedule:
    - cron: '*/10 * * * *' # 10분만능 실행
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - date: '5/23'
            schedule-id: 100001
          - date: '5/24'
            schedule-id: 100002
          - date: '5/25'
            schedule-id: 100003
    steps:
      - name: Check Melon Ticket - Diamond
        uses: chooing/melon-ticket-actions-discord@main
        with:
          product-id: 211159
          schedule-id: ${{ matrix.schedule-id }}
          seat-id: 12170
          slack-incoming-webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          message: '[${{ matrix.date }}] 다이아몬드석에 좌석이 생겼어요!'
          notify-when-unavailable: true

      - name: Check Melon Ticket - Standing
        uses: chooing/melon-ticket-actions-discord@main
        with:
          product-id: 211159
          schedule-id: ${{ matrix.schedule-id }}
          seat-id: 10007
          slack-incoming-webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          message: '[${{ matrix.date }}] 스탠딩석에 좌석이 생겼어요!'
          notify-when-unavailable: true

      - name: Check Melon Ticket - 일반지정석
        uses: chooing/melon-ticket-actions-discord@main
        with:
          product-id: 211159
          schedule-id: ${{ matrix.schedule-id }}
          seat-id: 12171
          slack-incoming-webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          message: '[${{ matrix.date }}] 일반지정석에 좌석이 생겼어요!'
          notify-when-unavailable: true
